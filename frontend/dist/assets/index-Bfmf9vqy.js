(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();function v(){const e=document.createElement("nav");return e.className="bg-gray-800 p-4 text-white flex justify-center space-x-6 fixed top-0 left-0 w-full shadow-md",e.innerHTML=`
	  <a href="/" onclick="navigateTo(event, '/')" class="hover:text-blue-400 transition duration-300">üè† Accueil</a>
	  <a href="/game" onclick="navigateTo(event, '/game')" class="hover:text-blue-400 transition duration-300">üéÆ Jeu</a>
	  <a href="/profile" onclick="navigateTo(event, '/profile')" class="hover:text-blue-400 transition duration-300">üë§ Profil</a>
	`,e}function f(e){const t=document.createElement("div");t.className="min-h-screen flex flex-col bg-gray-900 text-white",t.appendChild(v());const r=document.createElement("div");return r.className="flex flex-col items-center justify-center min-h-screen mt-16 px-4 w-full",r.appendChild(e),t.appendChild(r),t}function y(){const e=document.createElement("div");e.className="flex flex-col items-center justify-center min-h-screen p-4 text-center";const t=document.createElement("h1");t.className="text-4xl font-bold mb-4",t.innerText="Bienvenue sur Ft Transcendence !";const r=document.createElement("p");r.className="text-lg text-gray-300 mb-4 text-center";const o=document.createElement("p");o.className="text-md text-green-300 mt-4",o.innerText="Chargement de la connexion...",fetch("/api/test").then(s=>s.json()).then(s=>{o.innerText=`R√©ponse du backend : ${s.message}`}).catch(s=>{o.innerText="Erreur de connexion au backend !",console.error("Erreur API :",s)});const i=document.createElement("button");return i.className="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition duration-300",i.innerText="Jouer Maintenant",i.onclick=s=>I(s,"/game"),e.appendChild(t),e.appendChild(r),e.appendChild(i),e.appendChild(o),f(e)}const p=1e3,u=500,c={x:20,y:u/2-50,width:10,height:100,speed:2},a={x:p-30,y:u/2-50,width:10,height:100,speed:2},n={x:p/2,y:u/2,radius:10,speedX:1,speedY:1,acceleration:1.05};let b=0,w=0;function T(){return{score1:b,score2:w}}function h(e){e===1?b++:e===2&&w++}function x(){n.x=p/2,n.y=u/2,n.speedX=n.speedX>0?-1:1,n.speedY=(Math.random()*2-1)*1}function g(){n.speedX*=n.acceleration,n.speedY*=n.acceleration}function C(e){const t=e.getContext("2d");function r(){if(!t)return;t.clearRect(0,0,e.width,e.height);const{score1:o,score2:i}=T();t.fillStyle="white",t.font="32px Arial",t.fillText(o.toString(),e.width/4,50),t.fillText(i.toString(),e.width*3/4,50),t.fillRect(c.x,c.y,c.width,c.height),t.fillRect(a.x,a.y,a.width,a.height),t.beginPath(),t.arc(n.x,n.y,n.radius,0,Math.PI*2),t.fill(),n.x+=n.speedX,n.y+=n.speedY,(n.y-n.radius<=0||n.y+n.radius>=e.height)&&(n.speedY*=-1),n.x-n.radius<=c.x+c.width&&n.y>=c.y&&n.y<=c.y+c.height&&(n.speedX*=-1,n.x=c.x+c.width+n.radius,g()),n.x+n.radius>=a.x&&n.y>=a.y&&n.y<=a.y+a.height&&(n.speedX*=-1,n.x=a.x-n.radius,g()),n.x+n.radius<=0&&(h(2),x()),n.x-n.radius>=e.width&&(h(1),x()),requestAnimationFrame(r)}r()}const l={};function N(e,t,r){document.addEventListener("keydown",i=>{["ArrowUp","ArrowDown","z","s"].includes(i.key)&&(i.preventDefault(),l[i.key]=!0)}),document.addEventListener("keyup",i=>{["ArrowUp","ArrowDown","z","s"].includes(i.key)&&(l[i.key]=!1)});function o(){l.z&&e.y>0&&(e.y-=e.speed),l.s&&e.y+e.height<r&&(e.y+=e.speed),l.ArrowUp&&t.y>0&&(t.y-=t.speed),l.ArrowDown&&t.y+t.height<r&&(t.y+=t.speed),requestAnimationFrame(o)}o()}function P(){const e=document.createElement("div");e.className="flex flex-col items-center justify-center min-h-screen p-4 text-center";const t=document.createElement("h1");t.className="text-3xl font-bold mb-4",t.innerText="üèì Mode Pong";const r=document.createElement("canvas");return r.width=1e3,r.height=500,r.className="border-4 border-white",e.appendChild(t),e.appendChild(r),setTimeout(()=>{C(r),N(c,a,r.height)},100),f(e)}const E={user:{username:"Invit√©",email:""}};function L(){return E.user}function A(e){E.user=e}function k(){const e=L(),t=document.createElement("div");t.className="flex flex-col items-center justify-center min-h-screen p-4";const r=document.createElement("h1");r.className="text-3xl font-bold mb-4",r.innerText="Profil du Joueur";const o=document.createElement("form");return o.className="bg-gray-800 p-6 rounded-lg shadow-lg text-white w-80",o.innerHTML=`
    <label class="block mb-2">Pseudo:</label>
    <input type="text" id="username" class="w-full p-2 rounded bg-gray-700 border border-gray-600 text-white" value="${e.username}" />

    <label class="block mt-4 mb-2">Email:</label>
    <input type="email" id="email" class="w-full p-2 rounded bg-gray-700 border border-gray-600 text-white" value="${e.email}" />

    <button type="submit" class="mt-4 bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded transition duration-300">Enregistrer</button>
  `,o.onsubmit=i=>{i.preventDefault();const s=document.getElementById("username").value,d=document.getElementById("email").value;A({username:s,email:d}),alert("Profil mis √† jour !")},t.appendChild(r),t.appendChild(o),f(t)}function M(){const e=document.createElement("div");e.className="flex flex-col items-center justify-center h-screen bg-gray-900 text-white";const t=document.createElement("h1");t.className="text-3xl font-bold",t.innerText="Test de l'API";const r=document.createElement("p");return r.className="mt-4 text-lg",r.innerText="Chargement...",fetch("/api/test").then(o=>o.json()).then(o=>{r.innerText=o.message}).catch(o=>{console.error("Erreur API:",o),r.innerText="Erreur de connexion au backend."}),e.appendChild(t),e.appendChild(r),e}const j={"/":y,"/game":P,"/profile":k,"/apiTest":M};function I(e,t){e.preventDefault(),window.history.pushState({},t,window.location.origin+t),m()}function m(){const e=document.getElementById("app");if(!e)return;e.innerHTML="";const t=j[window.location.pathname]||y;e.appendChild(t())}window.addEventListener("popstate",m);document.addEventListener("DOMContentLoaded",m);document.addEventListener("DOMContentLoaded",()=>{m()});
